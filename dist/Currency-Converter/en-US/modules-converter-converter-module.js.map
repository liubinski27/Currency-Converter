{"version":3,"sources":["./src/app/modules/converter/converter.module.ts","./src/app/modules/converter/converter.component.ts","./src/app/modules/converter/converter.component.html"],"names":[],"mappings":"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","file":"modules-converter-converter-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { ConverterSharedModule } from '../shared/converter-shared.module';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { ConverterComponent } from './converter.component';\n\nexport const routes: Routes = [\n  { path: '', component: ConverterComponent }\n];\n\n@NgModule({\n  declarations: [\n    ConverterComponent\n  ],\n  imports: [\n    ConverterSharedModule,\n    RouterModule.forChild(routes)\n  ],\n  exports: [\n    ConverterComponent\n  ]\n})\n\nexport class ConverterModule { }","import { Component, OnInit } from '@angular/core';\nimport { ConverterService } from '../shared/services/converter.service';\nimport { ICurrency, ILoadedCurrency } from '../shared/models/currency';\n\n@Component({\n  selector: 'app-converter',\n  templateUrl: './converter.component.html',\n  styleUrls: ['./converter.component.scss']\n})\n\nexport class ConverterComponent implements OnInit {\n\n  currenciesList: ICurrency[];\n  selectedCurrencies: ICurrency[] = [];\n  selectedCurrenciesAbbreviations: string[] = [];\n  selectedCurrencyAbbreviation: string;\n  convertedInputValueInByn: number = 0;\n  savedCurrencyIndex: number;\n  savedCurrencyValue: number;\n\n  constructor(\n    private converterService: ConverterService\n  ) { }\n\n  getCurrencies(date: string = '') {\n    this.converterService.getCurrencies(date).subscribe((response: ILoadedCurrency[]) => {\n      this.currenciesList = ConverterService.processCurrencies(response);\n      if (this.currenciesList) {\n        this.selectedCurrencyAbbreviation = this.currenciesList[0].abbreviation;\n        this.getSavedData();\n      }\n    });\n  }\n\n  addSelectedCurrencies() {\n    const foundCurrencyInSelectedCurrencies = this.converterService.findCurrency(this.selectedCurrencies, this.selectedCurrencyAbbreviation);\n    if (!foundCurrencyInSelectedCurrencies) {\n      const foundCurrencyInCurrenciesList = this.converterService.findCurrency(this.currenciesList, this.selectedCurrencyAbbreviation);\n      if (foundCurrencyInCurrenciesList) {\n        this.selectedCurrencies.push(foundCurrencyInCurrenciesList);\n      }\n    }\n    this.saveData();\n  }\n\n  deleteInput(selectedCurrencyAbbreviation: string) {\n    const indexOfSelectedCurrency = this.selectedCurrencies.findIndex(item => item.abbreviation === selectedCurrencyAbbreviation);\n    if (indexOfSelectedCurrency >= 0) {\n      this.selectedCurrencies.splice(indexOfSelectedCurrency, 1);\n    }\n    if (!this.selectedCurrencies.length) {\n      this.convertedInputValueInByn = 0;\n      this.savedCurrencyValue = 0;\n      this.savedCurrencyIndex = 0;\n    }\n    this.saveData();\n  }\n\n  disableOption(selectedCurrencyAbbreviation: string) {\n    return this.converterService.findCurrency(this.selectedCurrencies, selectedCurrencyAbbreviation);\n  }\n\n  convertInputToByn(currencyValue: number, currencyScale: number, currencyRate: number, index: number) {\n    this.convertedInputValueInByn = currencyValue / currencyScale * currencyRate;\n    this.saveData();\n    this.savedCurrencyIndex = index;\n    this.savedCurrencyValue = currencyValue;\n  }\n\n  convertInputToCurrency(currencyScale: number, currencyRate: number, index: number) {\n    if (index === this.savedCurrencyIndex) {\n      return this.savedCurrencyValue;\n    } else {\n      const value = this.convertedInputValueInByn * currencyScale / currencyRate;\n      return Number.isInteger(value) ? value : value.toFixed(4);\n    }\n  }\n\n  saveData() {\n    this.selectedCurrenciesAbbreviations = [];\n    this.selectedCurrencies.forEach(item => {\n      const CurrencyAbbreviation = this.selectedCurrenciesAbbreviations.find(el => el === item.abbreviation);\n      if (!CurrencyAbbreviation) {\n        this.selectedCurrenciesAbbreviations.push(item.abbreviation);\n      }\n    });\n    sessionStorage.setItem('selectedCurrencies', JSON.stringify(this.selectedCurrenciesAbbreviations));\n  }\n\n  getSavedData() {\n    this.selectedCurrencies = [];\n    const savedCurrenciesAbbreviations = sessionStorage.getItem('selectedCurrencies');\n    if (savedCurrenciesAbbreviations) {\n      this.selectedCurrenciesAbbreviations = JSON.parse(savedCurrenciesAbbreviations);\n      this.selectedCurrenciesAbbreviations.forEach(item => {\n        const foundCurrencyInCurrenciesList = this.converterService.findCurrency(this.currenciesList, item);\n        if (foundCurrencyInCurrenciesList) {\n          const selectedCurrency = this.selectedCurrencies.find(item => item === foundCurrencyInCurrenciesList);\n          if (!selectedCurrency) {\n            this.selectedCurrencies.push(foundCurrencyInCurrenciesList);\n          }\n        }\n      });\n    }\n  }\n\n  ngOnInit(): void {\n    this.getCurrencies();\n  }\n}","<converter-header></converter-header>\n<div class=\"container-fluid\">\n    <app-date (onChange)=\"getCurrencies($event)\"></app-date>\n    <div *ngIf=\"currenciesList; else loading\">\n        <div class=\"converterMenu\">\n            <select class=\"form-control\" name=\"currency\" [(ngModel)]=\"selectedCurrencyAbbreviation\">\n                <option *ngFor=\"let currency of currenciesList\" [value]=\"currency.abbreviation\"\n                    [disabled]=\"disableOption(currency.abbreviation)\">\n                    {{ currency.abbreviation }}\n                </option>\n            </select>\n            <button class=\"btn btn-primary\" (click)=\"addSelectedCurrencies()\">{{ 'currency.add' | translate }}</button>\n        </div>\n        <div class=\"inputValue\">\n            <input class=\"form-control\" type=\"text\" (input)=\"convertInputToByn($event.target.value, 1, 1, -1)\"\n                [value]=\"convertInputToCurrency(1, 1, -1)\">\n            <span>BYN</span>\n            <button class=\"btn btn-danger disabled\">x</button>\n        </div>\n        <div class=\"inputValue\" *ngFor=\"let selectedCurrency of selectedCurrencies; let i = index\">\n            <input class=\"form-control\" type=\"text\"\n                (input)=\"convertInputToByn($event.target.value, selectedCurrency.scale, selectedCurrency.rate, i)\"\n                [value]=\"convertInputToCurrency(selectedCurrency.scale, selectedCurrency.rate, i)\">\n            <span>{{ selectedCurrency.abbreviation }}</span>\n            <button class=\"btn btn-danger\" (click)=\"deleteInput(selectedCurrency.abbreviation)\">x</button>\n        </div>\n    </div>\n    <ng-template #loading>\n        <div class=\"loading\">{{ 'currencies.loading' | translate }}</div>\n    </ng-template>\n</div>\n<converter-footer></converter-footer>"],"sourceRoot":"webpack:///"}